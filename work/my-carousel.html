<!-- Load the Polymer.Element base class -->
<link rel="import" href="bower_components/polymer/polymer-element.html">
<link rel="import" href="my-mixin.html">

<dom-module id="my-carousel">
    <template>
        <!-- Styles MUST be inside template -->
        <style>
             :host {
                display: block;
                position: relative;
                overflow: hidden;
            }

            div > ::slotted(:not([selected])) {
                display: none;
            }

            button {
                position: absolute;
                top: calc(50% - 20px);
                padding: 0;
                line-height: 40px;
                border: none;
                background: none;
                color: #DDD;
                font-size: 40px;
                font-weight: bold;
                opacity: 0.7;
                cursor: pointer;
            }

            button:hover,
            button:focus {
                opacity: 1;
            }

            #prevBtn {
                left: 12px;
            }

            #nextBtn {
                right: 12px;
            }

            button[disabled] {
                opacity: 0.4;
            }
        </style>

        <div>
            <slot></slot>
        </div>

        <button id="prevBtn" on-click="previous">&#x276E;</button>
        <button id="nextBtn" on-click="next">&#x276F;</button>
    </template>

    <script>
        // Extend Polymer.Element with MyMixin
        class MyCarousel extends MyMixin(Polymer.Element) {
            static get is() { return 'my-carousel' }

            _selectedChanged(selected, oldSelected) {
                // Invokes _selectedChanged() in MyMixin
                super._selectedChanged(selected, oldSelected);

                if (selected) {
                    this.$.prevBtn.disabled = !selected.previousElementSibling;
                    this.$.nextBtn.disabled = !selected.nextElementSibling;
                } else {
                    this.$.nextBtn.disabled = true;
                    this.$.prevBtn.disabled = true;
                }
            }

            previous() {
                const element = this.selected && this.selected.previousElementSibling;

                if (element) {
                    this.selected = element;
                }
            }

            next() {
                const element = this.selected && this.selected.nextElementSibling;

                if (element) {
                    this.selected = element;
                }
            }
        }

        // Register custom element definition using standard platform API
        customElements.define(MyCarousel.is, MyCarousel);
    </script>
</dom-module>
